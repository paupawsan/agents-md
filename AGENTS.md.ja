<!--
Copyright (c) 2025 Paulus Ery Wasito Adhi paupawsan@gmail.com

Licensed under the MIT License. See LICENSE file for details.

言語切り替え:
英語版と日本語版を切り替えるには:
  python3 switch_agents_lang.py en    # 英語に切り替え
  python3 switch_agents_lang.py ja    # 日本語に切り替え
  python3 switch_agents_lang.py       # 現在の言語を表示

または手動で: 日本語にするにはAGENTS.md.jaをAGENTS.mdにコピー、英語に戻すにはAGENTS.md.backupから復元。
-->

# メモリシステムガイドライン

**設定**: `{MEMORY_PATH}`をメモリルートフォルダのフルパスに置き換えてください。

**例**: メモリを`~/Documents/my-memory`に配置する場合、`{MEMORY_PATH}`を`/Users/username/Documents/my-memory`に置き換えてください（システムがチルダ展開をサポートしている場合は`~/Documents/my-memory`も使用可能）。

設定には`setup_memory_dir.py`スクリプトまたは手動置換を使用してください。

## メモリ同期（必須）

**重要**: エージェントは重要なタスクの後、外部ファイルにメモリを同期する必要があります。

**パス**（`{MEMORY_PATH}` = メモリルートフォルダのフルパス）:
- ルート: `{MEMORY_PATH}`（これがメモリルートフォルダです）
- プロジェクト: `{MEMORY_PATH}/[project-name]/`
- 共通: `{MEMORY_PATH}/common/`（設定、パターン）
- プライベート: `{MEMORY_PATH}/private/` ⚠️（認証情報、個人情報）

**プラットフォーム検出**:
- エージェントは設定された`{MEMORY_PATH}`を直接使用します（プラットフォーム検出は不要）
- ユーザーはセットアップスクリプトまたは手動置換を介して`{MEMORY_PATH}`を設定します
- 一般的なパス例については`_agents-md/memory/platform.md`を参照してください

**同期タイミング**: 重要なタスクの後、パターンを発見したとき、会話の終了時。

**回復**: コンテキストが失われた場合、`{MEMORY_PATH}/common/preferences.md`を確認し、次に`{MEMORY_PATH}/[project-name]/context.md`を確認し、その後セマンティック検索を使用してください。

## プライバシーチェック（最初に必須）

**情報を保存する前に**:
- ⚠️ 個人/プライベート情報？ → `{MEMORY_PATH}/private/`のみ
- ⚠️ 名前、メール、会社、認証情報？ → `{MEMORY_PATH}/private/`のみ
- ✅ いいえの場合 → 分類に進む

**プライベート情報を`topic/`または`session/`ファイルに保存しないでください**。

## 保存の決定

**保存するもの**: アーキテクチャの決定、再利用可能なパターン、ユーザー設定、プロジェクト知識、学んだ教訓、繰り返し発生するソリューション。

**保存しないもの**: 一時的な情報、明白な事実、冗長な情報、過度に細かい詳細、会話の転写、未検証の情報。

**評価**: プライバシーチェック → 価値 → 検証 → 関連性 → 統合 → 組織化。

## メモリファイルのライセンスヘッダー

**重要**: メモリファイルはユーザーデータであり、ライセンスされたソースコードではありません。

- ⚠️ **メモリファイル（topic/、session/、context/）にライセンスヘッダーを追加しないでください**
- メモリファイルはユーザー生成コンテンツおよび自動生成メモリです
- ライセンスヘッダーはプロジェクトリポジトリのソースコードファイルのみに使用されます
- メモリファイルを作成または更新する際は、著作権/ライセンス通知を含めないでください

## RAG戦略

**マルチレベル取得**:
1. インデックスルックアップ（`memories.json`）- ~100-500トークン
2. セマンティック検索（`codebase_search`）- ~200-1000トークン
3. ヘッダースキャン（`grep`）- ~50-200トークン
4. 選択的読み取り（offset/limit付き`read_file`）- ~200-2000トークン

**常に**: インデックスを確認 → セマンティック検索 → ヘッダーをスキャン → 選択的に読み取る。

**しないでください**: スキャンせずに大きなファイル（>500行）全体を読み取る、すべてのファイルを同時に読み込む、インデックスファイルをスキップする。

## 参照

- `_agents-md/memory/commands.md` - 安全なコマンド使用ルール（重要）
- `_agents-md/memory/organization.md` - 組織化ルール
- `_agents-md/memory/rag.md` - RAG戦略
- `_agents-md/memory/platform.md` - プラットフォームパス

