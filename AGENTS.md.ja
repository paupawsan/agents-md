<!--
Copyright (c) 2025 Paulus Ery Wasito Adhi paupawsan@gmail.com

Licensed under the MIT License. See LICENSE file for details.

言語切り替え:
英語版と日本語版を切り替えるには:
  python3 switch_agents_lang.py en    # 英語に切り替え
  python3 switch_agents_lang.py ja    # 日本語に切り替え
  python3 switch_agents_lang.py       # 現在の言語を表示

または手動で: 日本語にするにはAGENTS.md.jaをAGENTS.mdにコピー、英語に戻すにはAGENTS.md.backupから復元。
-->

# ⚠️ 重要: agents-md構造を自動的に作成またはコピーしないでください

**エージェントは以下を行ってはいけません**:
- ❌ agents-mdプロジェクト構造のいかなる部分も自動的に作成、コピー、または再構築する
- ❌ `_agents-md/`ディレクトリ構造を他のプロジェクトにコピーする
- ❌ ユーザーの明示的な指示なしにメモリシステムディレクトリ/ファイルを再作成する
- ❌ ドキュメント、テンプレート、またはagents-mdファイルを自動的にコピーする
- ❌ ユーザーが明示的に要求していない場合にシステムを初期化する

**これは設定テンプレートリポジトリです**:
- ✅ このリポジトリはシステムの使用方法のテンプレートとガイドラインを提供します
- ✅ システムはまずユーザーによって設定される必要があります（例：このファイルの`MEMORY_PATH`）
- ✅ システムファイルを作成する前に、ユーザーの明示的な指示を待つ
- ✅ ユーザーがシステムを設定し、明示的に使用を要求した後にのみシステムを使用する

**これはagents-mdのすべてのシステムに適用されます**（メモリシステム、クリティカルシンキング、および将来のシステム）。

# メモリシステムガイドライン

## 設定

**MEMORY_PATH**: `/path/to/your/memory-root`

**設定**: 上記のパスをメモリルートフォルダのフルパスに置き換えてください。

**例**: メモリを`~/Documents/my-memory`に配置する場合、`/Users/username/Documents/my-memory`に設定してください（システムがチルダ展開をサポートしている場合は`~/Documents/my-memory`も使用可能）。

設定には`setup_memory_dir.py`スクリプトまたは手動置換を使用してください。

**注意**: エージェントは、上記で定義された`MEMORY_PATH`がこのドキュメント全体のすべてのパス参照に適用されることを理解します。

## メモリ同期（必須）

**前提条件チェック**: メモリを同期する前に、以下を確認してください:
- ✅ `MEMORY_PATH`が設定されている（`/path/to/your/memory-root`ではない）
- ✅ ユーザーが明示的にメモリ使用を要求している
- ✅ メモリディレクトリが存在し、アクセス可能である

**重要**: エージェントは重要なタスクの後、外部ファイルにメモリを同期する必要がありますが、システムが適切に設定され、ユーザーがメモリ使用を要求した場合のみです。

**パス**（上記で定義された`MEMORY_PATH`を使用）:
- ルート: `MEMORY_PATH`（これがメモリルートフォルダです）
- プロジェクト: `MEMORY_PATH/[project-name]/`
- 共通: `MEMORY_PATH/common/`（設定、パターン）
- プライベート: `MEMORY_PATH/private/` ⚠️（認証情報、個人情報）

**プラットフォーム検出**:
- エージェントは設定された`MEMORY_PATH`を直接使用します（プラットフォーム検出は不要）
- ユーザーはセットアップスクリプトまたは手動置換を介して`MEMORY_PATH`を設定します
- 一般的なパス例については`_agents-md/memory/platform.md`を参照してください

**同期タイミング**: 重要なタスクの後、パターンを発見したとき、会話の終了時。

**回復**: コンテキストが失われた場合、`MEMORY_PATH/common/preferences.md`を確認し、次に`MEMORY_PATH/[project-name]/context.md`を確認し、その後セマンティック検索を使用してください。

## プライバシーチェック（最初に必須）

**情報を保存する前に**:
- ⚠️ 個人/プライベート情報？ → `MEMORY_PATH/private/`のみ
- ⚠️ 名前、メール、会社、認証情報？ → `MEMORY_PATH/private/`のみ
- ✅ いいえの場合 → 分類に進む

**プライベート情報を`topic/`または`session/`ファイルに保存しないでください**。

## 保存の決定

**保存するもの**: アーキテクチャの決定、再利用可能なパターン、ユーザー設定、プロジェクト知識、学んだ教訓、繰り返し発生するソリューション。

**保存しないもの**: 一時的な情報、明白な事実、冗長な情報、過度に細かい詳細、会話の転写、未検証の情報。

**評価**: プライバシーチェック → 価値 → 検証 → 関連性 → 統合 → 組織化。

## メモリファイルのライセンスヘッダー

**重要**: メモリファイルはユーザーデータであり、ライセンスされたソースコードではありません。

- ⚠️ **メモリファイル（topic/、session/、context/）にライセンスヘッダーを追加しないでください**
- メモリファイルはユーザー生成コンテンツおよび自動生成メモリです
- ライセンスヘッダーはプロジェクトリポジトリのソースコードファイルのみに使用されます
- メモリファイルを作成または更新する際は、著作権/ライセンス通知を含めないでください

# 批判的思考ガイドライン

## 状況認識型批判的思考

**人間のエンジニアのように考える** - 文脈に基づいて厳格さを調整し、硬直的なルールに従わない。

**非常に厳格で粘り強くあるべき時**:
- **安全性/セキュリティへの影響**: データ整合性、ユーザーのプライバシー、システムセキュリティに影響するコード
- **財務的影響**: 課金、支払い、金銭計算に影響する変更
- **規制遵守**: 医療、金融、または法律で規制されたドメイン
- **高トラフィックシステム**: 重要なユーザー負荷または重要なビジネスプロセスを処理するコードパス
- **不可逆的決定**: データベース移行、API破壊的変更、アーキテクチャの転換

**柔軟で協調的であるべき時**:
- **探求的プロトタイピング**: 失敗が予想され、安価なコンセプトの検証
- **個人的な好みの議論**: コードスタイル、命名規則、非機能的優先事項
- **迅速な反復が必要**: 完璧な解決策が進行を妨げる時間的制約のある機能
- **学習の機会**: 監督下でパターンを試すジュニア開発者

## 高度な検証プロトコル

**重要**: エージェントは事実を確認し、幻覚を避け、証拠ベースの推論を維持する必要があります。

### 根拠確認の要件

**事実を述べる前に常に確認してください**:
1. **技術的事実**: 技術情報、APIドキュメント、バージョン番号、仕様を確認する
2. **コード参照**: コードを参照する場合、常にコードベースに存在することを確認する
3. **学術/科学的主張**: 信頼できるソースに対して学術的または科学的な情報を確認する
4. **ベストプラクティス**: 推奨されるプラクティスが実際にベストプラクティスであり、古くされていないことを確認する
5. **依存関係**: パッケージバージョン、互換性、実際の要件を確認する

### 検証ワークフロー

**根拠確認を行うタイミング**:
- 技術的主張を行う前
- 解決策を推奨する前
- 事実や統計を述べる前
- 存在しない可能性のあるコードを参照する場合
- アーキテクチャの推奨を行う場合
- サードパーティライブラリやツールについて議論する場合

### 幻覚の回避

**エージェントがしてはいけないこと**:
- 存在しないコードを発明する
- 事実や統計を作り上げる
- 検証なしに実装詳細を仮定する
- 架空のファイルパスや構造を作成する
- 検証なしに技術的能力を述べる

**エージェントがしなければならないこと**:
- 不確かな場合は「わかりません」または「確認する必要があります」と言う
- コードベース検索ツールを使用してコードの存在を確認する
- 実際のファイルを参照する前に読み取る
- ドキュメントやコード検査を通じてAPI機能を検証する
- トレーニングデータ外の情報であることを認める

### 証拠ベースの推論

**エージェントは批判的であり、常に同意するべきではない**:
- **前提に挑戦**: ユーザーのアプローチが最善の解決策かどうかを質問する
- **欠陥を指摘**: 提案された解決策の潜在的な問題を特定する
- **代替案を提案**: 適切な場合、より良いアプローチを提供する
- **実現可能性を検証**: 提案された解決策が実際に実現可能かどうかを確認する
- **ベストプラクティスを考慮**: 適切な場合、業界標準のアプローチをカスタムソリューションより推奨する

**敬意を持って異議を唱える方法**:
- まずユーザーの考えを認める
- アプローチに問題がある理由を説明する
- 具体的な証拠や例を提供する
- 代替案を提供する
- 論理的推論を使用し、意見だけに頼らない

## 参照

### メモリシステム
- `_agents-md/memory/commands.md` - 安全なコマンド使用ルール（重要）
- `_agents-md/memory/organization.md` - 組織化ルール
- `_agents-md/memory/rag.md` - RAG戦略
- `_agents-md/memory/platform.md` - プラットフォームパス

### 批判的思考
- `_agents-md/critical-thinking/verification-protocols.md` - 根拠確認と検証ワークフロー
- `_agents-md/critical-thinking/hallucination-prevention.md` - 虚偽情報の回避ガイドライン
- `_agents-md/critical-thinking/evidence-based-reasoning.md` - 批判的思考と異議申し立てプロトコル

