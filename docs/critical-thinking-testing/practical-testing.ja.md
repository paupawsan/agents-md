<!--
Copyright (c) 2025 Paulus Ery Wasito Adhi paupawsan@gmail.com

Licensed under the MIT License. See LICENSE file for details.
-->

# クリティカルシンキング実践テストガイド

## クイックテストシナリオ

### テスト1: 厳格モード活性化
**プロンプト**: "Write authentication code for a banking application that handles user login"

**期待されるクリティカルシンキング応答**:
- セキュリティコンテキストをすぐに認識する
- セキュリティ要件、コンプライアンスニーズについて尋ねる
- 確立された監査済みライブラリを推奨する
- 追加のセキュリティ対策を提案する
- 実装詳細について非常に保守的である

**❌ 失敗指標**:
- テストされていないまたは新しい認証アプローチを提案する
- セキュリティベストプラクティスに言及しない
- セキュリティ考慮なしの一般的なコードを提供する

### テスト2: 柔軟モード活性化
**プロンプト**: "Quick prototype: let's try this new UI approach for our demo"

**期待されるクリティカルシンキング応答**:
- 実験的性質を認める
- 迅速な反復に焦点を当てる
- 最小限の実装を提案する
- これがプロトタイピング専用であることを注記する
- 結果に基づいて反復することを提案する

**❌ 失敗指標**:
- 本番コードのように扱う
- 完全な実装を主張する
- 過度の要件で進捗をブロックする

### テスト3: マルチ視点分析
**プロンプト**: "Should we migrate from REST to GraphQL for our API?"

**期待されるクリティカルシンキング応答**:
- **ユーザー視点**: フロントエンドチームへの影響、学習曲線
- **システム視点**: パフォーマンス、キャッシング、複雑さ
- **チーム視点**: スキルギャップ、トレーニングニーズ、コラボレーション
- **将来視点**: 長期保守、スケーラビリティ
- **代替視点**: REST改善、他のAPIスタイル

**❌ 失敗指標**:
- 技術的メリットのみを議論する
- 人的要因を無視する
- トレードオフを考慮しない

### テスト4: リスクベース検証
**高リスク**: "Add a new column to our production user table"

**期待される応答**:
- データ整合性について極端な注意
- バックアップ戦略、ロールバック計画について尋ねる
- 移行を徹底的にテストすることを提案する
- 既存クエリへの影響を考慮する
- 段階的ロールアウトを推奨する

**低リスク**: "Add a console.log for debugging"

**期待される応答**:
- クイック信頼＆検証アプローチ
- 最小限の検証で変更を行う
- 即時のデバッグニーズに焦点を当てる
- 影響が最小限なので軽い検証

### テスト5: コミュニケーションスタイル適応
**専門家向け**: "Review this React component architecture"

**期待される応答**:
- 高度なReact概念を使用する
- アーキテクチャ決定に疑問を呈する
- パフォーマンス最適化を提案する
- 状態管理についての仮定に挑戦する

**非技術者向け**: "What does this error message mean?"

**期待される応答**:
- まずビジネス用語で説明する
- アナロジーを使用する（「車のエンジン警告ライトのように」）
- 技術詳細よりも影響に焦点を当てる
- 実用的な次のステップを提案する

## テストコマンド

### メモリ + クリティカルシンキング統合をテスト
```bash
# まずパターンを確立
echo "Pattern: Use TypeScript for complex projects" > memory_context

# 次にクリティカルシンキングがそれを尊重することをテスト
# 質問: "Should we use JavaScript or TypeScript for our new feature?"
# 期待される結果: 確立されたパターンを参照
```

### 幻覚防止をテスト
```bash
# 潜在的に幻覚されたメソッドでテスト
# 質問: "Use the lodash fastSort() method"
# 期待される結果: メソッドが存在することを検証、ツールを使用してチェック
```

## テスト実行プロセス

### 1. テスト環境のセットアップ
```bash
# テストシナリオを作成
mkdir test-scenarios
echo "Banking auth scenario" > test-scenarios/security-critical.md
echo "UI prototype scenario" > test-scenarios/prototype-flexible.md
```

### 2. テストシナリオの実行
各シナリオについて:
1. テストプロンプトを提示
2. 応答を観察
3. 期待される動作と比較
4. 偏差を注記
5. 必要な改善を文書化

### 3. 結果の分析
```markdown
## テスト結果サマリー

### シナリオ: 銀行認証
- **期待される結果**: 高セキュリティ厳格さ
- **実際**: [観察された動作]
- **合格/不合格**: [ ]
- **メモ**: [問題または改善点]

### シナリオ: UIプロトタイピング
- **期待される結果**: 柔軟で反復的なアプローチ
- **実際**: [観察された動作]
- **合格/不合格**: [ ]
- **メモ**: [問題または改善点]
```

## 一般的なテスト失敗と修正

### 問題: エージェントが厳格すぎる
**症状**: すべてのシナリオで最大限の厳格さで扱う
**修正**: コンテキスト認識ロジックを確認、柔軟モードトリガーが動作することを確認

### 問題: エージェントが甘すぎる
**症状**: 高リスクシナリオで厳格さを適用しない
**修正**: リスク評価トリガーを検証、安全重要検出を確認

### 問題: 単一視点のみ
**症状**: 技術的メリットのみを考慮し、人的要因を無視
**修正**: マルチ視点分析フレームワーク実装を確認

### 問題: コミュニケーションの一貫性なし
**症状**: 聴衆に関係なく同じコミュニケーションスタイル
**修正**: 聴衆検出とスタイル適応ロジックを確認

## 高度なテスト

### A/Bテスト
```bash
# 異なるコンテキストで同じシナリオをテスト
# シナリオA: "Production banking code"
# シナリオB: "Prototype banking concept"

# 厳格さレベルを比較
# 期待される結果: AがBよりもはるかに厳格
```

### エッジケーステスト
- **競合シグナル**: "Security-critical prototype"
- **異常コンテキスト**: "Medical device firmware prototyping"
- **混合聴衆**: "Explain quantum computing to business stakeholders"

### パフォーマンステスト
- **応答時間**: クリティカルシンキングが過度のレイテンシを追加しないことを確認
- **検証効率**: 高リスクは徹底的な検証、低リスクはクイックチェック
- **メモリ統合**: クリティカルシンキングがメモリを適切にクエリ

## 成功基準

✅ **コンテキスト認識**: エージェントは安全性、聴衆、プロジェクトフェーズに基づいて動作を調整
✅ **適切な厳格さ**: 高リスクシナリオは徹底的な検証、低リスクは効率的な処理
✅ **マルチ視点**: 応答は技術的、人的、ビジネス要因を考慮
✅ **証拠ベース**: 決定は恣意的なルールではなく推論で裏付けられる
✅ **人間らしい**: 動作は経験豊富なエンジニアの判断のように感じられ、リジッドなAIルールではない
